<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IETE - Institution of Electronics and Telecommunication Engineers</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
            height: 100vh;
        }

        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Accessibility - Screen reader only text */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Loading indicator */
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #14b8a6;
            font-size: 18px;
            z-index: 100;
        }

        /* Info overlay */
        #info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            z-index: 10;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            #info {
                font-size: 12px;
                bottom: 10px;
                left: 10px;
            }
        }

        /* Performance indicator */
        #fps {
            position: absolute;
            top: 10px;
            right: 10px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 12px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div id="container">
        <!-- Accessibility -->
        <h1 class="sr-only">IETE - Institution of Electronics and Telecommunication Engineers</h1>
        
        <!-- Loading indicator -->
        <div id="loading">Loading 3D Scene...</div>
        
        <!-- Canvas container -->
        <div id="canvas-container"></div>
        
        <!-- Info overlay -->
        <div id="info">
            <div>Institution of Electronics and Telecommunication Engineers</div>
            <div style="margin-top: 5px; font-size: 12px; opacity: 0.6;">Drag to rotate â€¢ Scroll to zoom</div>
        </div>
        
        <!-- Performance indicator -->
        <div id="fps"></div>
    </div>

    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FontLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/geometries/TextGeometry.js"></script>

    <script>
        // Global variables
        let scene, camera, renderer, controls;
        let textMesh, groundPlane;
        let animationId;
        let isMobile = window.innerWidth <= 768;
        
        // Performance monitoring
        let frameCount = 0;
        let lastTime = performance.now();
        
        // Animation parameters
        const animationParams = {
            rotationSpeed: 0.005,
            floatAmplitude: 0.3,
            floatSpeed: 0.002
        };

        // Initialize the 3D scene
        function init() {
            // Create scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a0a0a);

            // Create camera with responsive aspect ratio
            camera = new THREE.PerspectiveCamera(
                75, 
                window.innerWidth / window.innerHeight, 
                0.1, 
                1000
            );
            camera.position.set(0, 2, 8);

            // Create renderer with optimizations
            renderer = new THREE.WebGLRenderer({ 
                antialias: !isMobile, // Disable antialiasing on mobile for performance
                powerPreference: isMobile ? "low-power" : "high-performance"
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, isMobile ? 1.5 : 2));
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = isMobile ? THREE.BasicShadowMap : THREE.PCFSoftShadowMap;
            renderer.outputEncoding = THREE.sRGBEncoding;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;

            document.getElementById('canvas-container').appendChild(renderer.domElement);

            // Setup controls with mobile restrictions
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.enableZoom = !isMobile;
            controls.enablePan = false;
            controls.maxPolarAngle = Math.PI / 2;
            controls.minDistance = isMobile ? 6 : 4;
            controls.maxDistance = isMobile ? 12 : 15;

            // Setup lighting
            setupLighting();

            // Create ground plane
            createGroundPlane();

            // Load font and create text
            loadFontAndCreateText();

            // Setup event listeners
            window.addEventListener('resize', onWindowResize, false);
            
            // Hide loading indicator
            document.getElementById('loading').style.display = 'none';
        }

        // Setup lighting system
        function setupLighting() {
            // Ambient light for overall illumination
            const ambientLight = new THREE.AmbientLight(0x404040, 0.3);
            scene.add(ambientLight);

            // Main directional light (rim light)
            const directionalLight = new THREE.DirectionalLight(0x14b8a6, 1.2);
            directionalLight.position.set(5, 10, 5);
            directionalLight.castShadow = true;
            
            // Shadow camera settings
            directionalLight.shadow.mapSize.width = isMobile ? 1024 : 2048;
            directionalLight.shadow.mapSize.height = isMobile ? 1024 : 2048;
            directionalLight.shadow.camera.near = 0.5;
            directionalLight.shadow.camera.far = 50;
            directionalLight.shadow.camera.left = -10;
            directionalLight.shadow.camera.right = 10;
            directionalLight.shadow.camera.top = 10;
            directionalLight.shadow.camera.bottom = -10;
            directionalLight.shadow.bias = -0.0001;
            
            scene.add(directionalLight);

            // Secondary fill light
            const fillLight = new THREE.DirectionalLight(0xffffff, 0.4);
            fillLight.position.set(-3, 5, -3);
            scene.add(fillLight);

            // Accent light for metallic highlights
            const accentLight = new THREE.PointLight(0xcd7f32, 0.8, 20);
            accentLight.position.set(0, 5, 3);
            scene.add(accentLight);
        }

        // Create ground plane with soft shadows
        function createGroundPlane() {
            const groundGeometry = new THREE.PlaneGeometry(20, 20);
            const groundMaterial = new THREE.MeshLambertMaterial({ 
                color: 0x1a1a1a,
                transparent: true,
                opacity: 0.8
            });
            
            groundPlane = new THREE.Mesh(groundGeometry, groundMaterial);
            groundPlane.rotation.x = -Math.PI / 2;
            groundPlane.position.y = -2;
            groundPlane.receiveShadow = true;
            
            scene.add(groundPlane);
        }

        // Load font and create 3D text
        function loadFontAndCreateText() {
            const loader = new THREE.FontLoader();
            
            // Use a built-in font URL that works with Three.js
            const fontUrl = 'https://threejs.org/examples/fonts/helvetiker_bold.typeface.json';
            
            loader.load(fontUrl, function(font) {
                createText(font);
            }, undefined, function(error) {
                console.error('Font loading error:', error);
                // Fallback: create simple geometry
                createFallbackText();
            });
        }

        // Create 3D text geometry
        function createText(font) {
            // Text geometry settings based on device performance
            const textGeometry = new THREE.TextGeometry('IETE', {
                font: font,
                size: isMobile ? 1.2 : 1.8,
                height: isMobile ? 0.1 : 0.2,
                curveSegments: isMobile ? 8 : 12,
                bevelEnabled: true,
                bevelThickness: isMobile ? 0.02 : 0.05,
                bevelSize: isMobile ? 0.01 : 0.02,
                bevelOffset: 0,
                bevelSegments: isMobile ? 3 : 5
            });

            // Center the geometry
            textGeometry.computeBoundingBox();
            const centerOffsetX = -0.5 * (textGeometry.boundingBox.max.x - textGeometry.boundingBox.min.x);
            const centerOffsetY = -0.5 * (textGeometry.boundingBox.max.y - textGeometry.boundingBox.min.y);
            textGeometry.translate(centerOffsetX, centerOffsetY, 0);

            // Create metallic gradient material
            const textMaterial = createMetallicMaterial();
            
            textMesh = new THREE.Mesh(textGeometry, textMaterial);
            textMesh.castShadow = true;
            textMesh.receiveShadow = true;
            
            scene.add(textMesh);
        }

        // Create fallback text for font loading errors
        function createFallbackText() {
            const textGeometry = new THREE.BoxGeometry(4, 1, 0.2);
            const textMaterial = createMetallicMaterial();
            
            textMesh = new THREE.Mesh(textGeometry, textMaterial);
            textMesh.castShadow = true;
            textMesh.receiveShadow = true;
            
            scene.add(textMesh);
        }

        // Create metallic gradient material
        function createMetallicMaterial() {
            // Create gradient texture
            const canvas = document.createElement('canvas');
            canvas.width = 256;
            canvas.height = 256;
            const context = canvas.getContext('2d');
            
            // Create radial gradient from steel to bronze
            const gradient = context.createRadialGradient(128, 128, 0, 128, 128, 128);
            gradient.addColorStop(0, '#B0C4DE'); // Light steel blue
            gradient.addColorStop(0.5, '#708090'); // Slate gray
            gradient.addColorStop(1, '#CD7F32'); // Bronze
            
            context.fillStyle = gradient;
            context.fillRect(0, 0, 256, 256);
            
            const gradientTexture = new THREE.CanvasTexture(canvas);
            
            return new THREE.MeshStandardMaterial({
                map: gradientTexture,
                metalness: 0.8,
                roughness: 0.3,
                envMapIntensity: 1.0,
                color: 0x14b8a6 // Turquoise tint
            });
        }

        // Animation loop
        function animate() {
            animationId = requestAnimationFrame(animate);
            
            // Update performance counter
            updateFPS();
            
            if (textMesh) {
                // Rotate around Y-axis
                textMesh.rotation.y += animationParams.rotationSpeed;
                
                // Floating motion using sine wave
                const time = Date.now() * animationParams.floatSpeed;
                textMesh.position.y = Math.sin(time) * animationParams.floatAmplitude;
            }
            
            // Update controls
            controls.update();
            
            // Render scene
            renderer.render(scene, camera);
        }

        // Update FPS counter
        function updateFPS() {
            frameCount++;
            const currentTime = performance.now();
            
            if (currentTime >= lastTime + 1000) {
                const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
                document.getElementById('fps').textContent = `FPS: ${fps}`;
                frameCount = 0;
                lastTime = currentTime;
            }
        }

        // Handle window resize
        function onWindowResize() {
            // Update mobile detection
            isMobile = window.innerWidth <= 768;
            
            // Update camera
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            
            // Update renderer
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, isMobile ? 1.5 : 2));
            
            // Update controls for mobile
            controls.enableZoom = !isMobile;
            controls.minDistance = isMobile ? 6 : 4;
            controls.maxDistance = isMobile ? 12 : 15;
        }

        // Cleanup function
        function cleanup() {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            if (renderer) {
                renderer.dispose();
            }
            
            window.removeEventListener('resize', onWindowResize);
        }

        // Handle page visibility changes for performance
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                // Pause animation when tab is not visible
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            } else {
                // Resume animation when tab becomes visible
                if (!animationId) {
                    animate();
                }
            }
        });

        // Initialize when page loads
        window.addEventListener('load', init);
        
        // Cleanup when page unloads
        window.addEventListener('beforeunload', cleanup);
        
        // Start animation loop
        animate();
    </script>
</body>
</html>
